<!DOCTYPE html>
<html>
<head>
  <title>员工认证</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
  <script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
</head>
<body>

<div class="container">
  <div class="card" style="margin-top: 50px;">
    <div class="card-body">
      <h4 class="card-title">认证结果通知</h4>
      <p class="card-text">认证通过！该员工属于我司事业发展部员工！【注意：本认证仅限用于园区门岗，差旅等身份凭证，但不具备考勤、通勤使用。】</p>
      <img style="width:50%;height:50%; float: right;" src="http://164.155.231.108/dingding.jpg">
      </div>
  </div>
</div>

</body>
<!-- 引入样式 -->
<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
<!-- 引入组件库 -->
<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="https://www.jq22.com/jquery/jquery-1.10.2.js"></script>

<script type="text/javascript">
<script type="text/javascript">
var system = {};

var p = navigator.platform;

var u = navigator.userAgent;

system.win = p.indexOf("Win") == 0;

system.mac = p.indexOf("Mac") == 0;

system.x11 = (p == "X11") || (p.indexOf("Linux") == 0);

if (system.win || system.mac || system.xll) {//如果是PC转

if (u.indexOf('Windows Phone') > -1) { //win手机端

}else {

window.location.href = " /404.html";

}

}
    function GetRequest() {
        var url = location.search; //获取url中"?"符后的字串
        var theRequest = new Object();
        if (url.indexOf("?") != -1) {
            var str = url.substr(1);
            strs = str.split("&");
            for (var i = 0; i < strs.length; i++) {
                theRequest[strs[i].split("=")[0]] = decodeURIComponent(strs[i].split("=")[1]);
            }
        }
        return theRequest;
    }
    var a=GetRequest();
    var index_1=a['password'];
    console.log(index_1);
    document.getElementById("name").innerHTML = index_1;

    //发请求http://localhost:8082/id/'+this.login.password
    //http://localhost:8082/id/?password=1120
    axios.get('http://164.155.231.108:8082/id/'+index_1).then(function (resp) {
        console.log(resp.data);
        const array1 = resp.data;

        const arr2 = [] //工号
        array1.forEach(obj=>{
            arr2.push(obj.password)

        });

        const arr4 = [] //企业id
        array1.forEach(obj=>{
            arr4.push(obj.logoname)

        });

        const arr5 = [] //logo
        array1.forEach(obj=>{
            arr5.push(obj.logo)

        });

        const arr6 = [] //logo
        array1.forEach(obj=>{
            arr6.push(obj.userimg)

        });


        const arr3 = [] //员工姓名
        array1.forEach(obj=>{
            arr3.push(obj.username)

        });
        document.getElementById("name").innerHTML = arr3;
        console.log(arr2)
        console.log(arr3)
        document.getElementById("username").innerHTML = index_1;
        console.log(arr4)
        var obj2 = document.getElementById("logoname");
        //#logo{background-image: url("http://localhost:8082/01.jpg");
        obj2.style.cssText = "background-image:url("+arr4+")";
        console.log(arr5)
        var obj = document.getElementById("logo");
        //#logo{background-image: url("http://localhost:8082/01.jpg");
        obj.style.cssText = "background-image:url("+arr5+")";
        console.log(arr6)
        var obj1 = document.getElementById("nameimg");
        //#logo{background-image: url("http://localhost:8082/01.jpg");
        obj1.style.cssText = "background-image:url("+arr6+")";

    })

    let  app = new Vue({
        el:"#app",
        data() {
            return{
                username:"",
                now:"",
                index_1:""
            }
        },
        methods:{

        },
        created: function () {
            var that = this;
            setInterval(function () {
                var date = new Date();
                var year = date.getFullYear();  //获取年份
                var month = date.getMonth() + 1;  //获取月份
                var day = date.getDate();  //获取日期
                var hours = date.getHours();  //获取小时
                var minutes = date.getMinutes();  //获取分钟
                var seconds = date.getSeconds();  //获取秒钟
                that.now = year + "年" + month + "月" + day + "日 " + hours + ":" + minutes + ":" + seconds;  //拼接时间字符串
            }, 1000)
        }
    })
</script>
</html>
